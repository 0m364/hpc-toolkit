{% extends "base_generic.html" %}

{% block extrameta %}
<script>
function subnetSelected() {
    {% autoescape off %}
    var subnet_map = {{ subnet_regions }};
    var region_info = {{ region_info }};
    {% endautoescape %}
    subnet_element = document.getElementById("id_subnet");
    zone_element = document.getElementById("id_cloud_zone");
    zone_element.disabled = false;
    $("#id_cloud_zone").find('option').remove().end();
    region_info[subnet_map[subnet_element.value]].forEach(function (item) {
      var el = document.createElement("option");
      el.text = item;
      el.setAttribute("value", item) 
      zone_element.appendChild(el);
    });
}

function initPage() {
    document.getElementById("id_subnet").onchange = subnetSelected;
}

window.onload=initPage;
</script>
{% endblock %}


{% block content %}
  <h2>Edit a GCP Filestore</h2>  


  {% if form.non_field_errors %}
  <div class="alert alert-danger" role="alert">{{ form.non_field_errors.as_text }}</div>
  {% endif %}

  <form action="" method="post">
    {% csrf_token %}

    <input type="hidden" name="cloud_credential" class="form-control" id="id_cloud_credential" value="{{ form.cloud_credential.value }}">

    <div class="form-group">
      {{ form.name.errors }}
      {{ form.name.label_tag }}
      {{ form.name }}
        <small class="form-text text-muted">{{ form.name.help_text }}</small>
    </div>
    <div class="form-group">
      {{ form.cloud_credential.errors }}
      {{ form.cloud_credential.label_tag }}
      {{ form.cloud_credential }}
        <small class="form-text text-muted">{{ form.cloud_credential.help_text }}</small>
    </div>
    <div class="form-group">
      {{ form.subnet.errors }}
      {{ form.subnet.label_tag }}
      {{ form.subnet }}
        <small class="form-text text-muted">{{ form.subnet.help_text }}</small>
    </div>
    <div class="form-group">
      {{ form.cloud_zone.errors }}
      {{ form.cloud_zone.label_tag }}
      {{ form.cloud_zone }}
        <small class="form-text text-muted">{{ form.cloud_zone.help_text }}</small>
    </div>
    <div class="form-group">
      {{ form.capacity.errors }}
      {{ form.capacity.label_tag }}
      {{ form.capacity }}
        <small class="form-text text-muted">{{ form.capacity.help_text }}</small>
    </div>
    <div class="form-group">
      {{ form.performance_tier.errors }}
      {{ form.performance_tier.label_tag }}
      {{ form.performance_tier }}
        <small class="form-text text-muted">{{ form.performance_tier.help_text }}</small>
    </div>
    <div class="form-group">
      {{ form.share_name.errors }}
      {{ form.share_name.label_tag }}
      {{ form.share_name }}
        <small class="form-text text-muted">{{ form.share_name.help_text }}</small>
    </div>

    <br/>
    <br/>  
    <input type="submit" value="Save" class="btn btn-primary"/>
    <button class="btn btn-primary" onclick="javascript:history.back();"/>Cancel</button>
  </form>

{% endblock %}
