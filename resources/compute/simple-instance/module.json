{
  "header": "Copyright 2021 Google LLC\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.",
  "footer": "",
  "inputs": [
    {
      "name": "deployment_name",
      "type": "string",
      "description": "Name of the deployment, used to name the cluster",
      "default": null,
      "required": true
    },
    {
      "name": "disable_public_ips",
      "type": "bool",
      "description": "If set to true, instances will not have public IPs",
      "default": false,
      "required": false
    },
    {
      "name": "disk_size_gb",
      "type": "number",
      "description": "Size of disk for instances.",
      "default": 200,
      "required": false
    },
    {
      "name": "disk_type",
      "type": "string",
      "description": "Disk type for instances.",
      "default": "pd-standard",
      "required": false
    },
    {
      "name": "instance_count",
      "type": "number",
      "description": "Number of instances",
      "default": 1,
      "required": false
    },
    {
      "name": "instance_image",
      "type": "object({\n    family  = string,\n    project = string\n  })",
      "description": "Instance Image",
      "default": {
        "family": "hpc-centos-7",
        "project": "cloud-hpc-image-public"
      },
      "required": false
    },
    {
      "name": "labels",
      "type": "any",
      "description": "Labels to add to the instances. List key, value pairs.",
      "default": null,
      "required": true
    },
    {
      "name": "machine_type",
      "type": "string",
      "description": "Machine type to use for the instance creation",
      "default": "c2-standard-60",
      "required": false
    },
    {
      "name": "metadata",
      "type": "map(string)",
      "description": "Metadata, provided as a map",
      "default": {},
      "required": false
    },
    {
      "name": "name_prefix",
      "type": "string",
      "description": "Name Prefix",
      "default": null,
      "required": false
    },
    {
      "name": "network_self_link",
      "type": "string",
      "description": "The self link of the network to attach the VM.",
      "default": "default",
      "required": false
    },
    {
      "name": "network_storage",
      "type": "list(object({\n    server_ip     = string,\n    remote_mount  = string,\n    local_mount   = string,\n    fs_type       = string,\n    mount_options = string\n  }))",
      "description": "An array of network attached storage mounts to be configured.",
      "default": [],
      "required": false
    },
    {
      "name": "service_account",
      "type": "object({\n    email  = string,\n    scopes = set(string)\n  })",
      "description": "Service account to attach to the instance. See https://www.terraform.io/docs/providers/google/r/compute_instance_template.html#service_account.",
      "default": {
        "email": null,
        "scopes": [
          "https://www.googleapis.com/auth/devstorage.read_only",
          "https://www.googleapis.com/auth/logging.write",
          "https://www.googleapis.com/auth/monitoring.write",
          "https://www.googleapis.com/auth/servicecontrol",
          "https://www.googleapis.com/auth/service.management.readonly",
          "https://www.googleapis.com/auth/trace.append"
        ]
      },
      "required": false
    },
    {
      "name": "zone",
      "type": "string",
      "description": "Compute Platform zone",
      "default": null,
      "required": true
    }
  ],
  "modules": [],
  "outputs": [
    {
      "name": "name",
      "description": "Name of any instance created"
    }
  ],
  "providers": [
    {
      "name": "google",
      "alias": null,
      "version": "~\u003e 3.0"
    }
  ],
  "requirements": [
    {
      "name": "terraform",
      "version": "\u003e= 0.14.0"
    },
    {
      "name": "google",
      "version": "~\u003e 3.0"
    }
  ],
  "resources": [
    {
      "type": "compute_disk",
      "name": "boot_disk",
      "provider": "google",
      "source": "hashicorp/google",
      "mode": "managed",
      "version": "latest",
      "description": null
    },
    {
      "type": "compute_instance",
      "name": "compute_vm",
      "provider": "google",
      "source": "hashicorp/google",
      "mode": "managed",
      "version": "latest",
      "description": null
    },
    {
      "type": "compute_image",
      "name": "compute_image",
      "provider": "google",
      "source": "hashicorp/google",
      "mode": "data",
      "version": "latest",
      "description": null
    }
  ]
}
